<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MiniCraft â€” Browser Voxel Demo</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="ui">
<div id="topbar">
<button id="saveBtn">Save</button>
<button id="loadBtn">Load</button>
<button id="exportBtn">Export</button>
<input id="importFile" type="file" accept="application/json" style="display:none">
<label for="blockSelect">Block:</label>
<select id="blockSelect">
<option value="1">Grass</option>
<option value="2">Dirt</option>
<option value="3">Stone</option>
<option value="4">Wood</option>
</select>
<span id="status">Click the canvas to lock pointer. Left click to remove, Right click to place</span>
</div>
</div>
<script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
<script>
// main.js inline for simplicity
(function(){
const SIZE = {x:16, y:8, z:16}; // keep small for performance
const BLOCKS = {
0: null,
1: {name:'grass', color:0x7fbf3f},
2: {name:'dirt', color:0x8b5a2b},
3: {name:'stone', color:0x8a8a8a},
4: {name:'wood', color:0x8b6b3a}
};


let scene, camera, renderer, controls;
let world = new Uint8Array(SIZE.x*SIZE.y*SIZE.z);


// helpers
const idx = (x,y,z)=> (y*SIZE.z + z)*SIZE.x + x;
const inBounds = (x,y,z)=> x>=0&&x<SIZE.x&&y>=0&&y<SIZE.y&&z>=0&&z<SIZE.z;


// init world simple flat terrain
function initWorld(){
for(let x=0;x<SIZE.x;x++){
for(let z=0;z<SIZE.z;z++){
const h = 2 + Math.floor(Math.random()*2);
for(let y=0;y<h;y++) world[idx(x,y,z)] = (y==h-1)?1:2; // top grass, below dirt
for(let y=h;y<3;y++) if(Math.random()<0.02) world[idx(x,y,Math.max(0,z-1))]=3;
}
}
}


function saveWorld(){
try{
localStorage.setItem('mc_clone_world', JSON.stringify(Array.from(world)));
setStatus('Saved to localStorage');
}catch(e){setStatus('Save failed: '+e.message)}
}
function loadWorld(){
const s = localStorage.getItem('mc_clone_world');
</html>
